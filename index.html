<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>New Tab</title>
  <style>
    :root {
      --card-bg: #343F44;
      --card-fg: #D3C6AA;
      --card-border: #DBBC7F;
      --card-border-hover: #A7C080;
      --info-border: #2E383C;
      --shadow: 0 6px 16px rgba(0,0,0,0.45);
      --shadow-hover: 0 10px 22px rgba(0,0,0,0.55);
      --scale: 1.15; /* global scale */
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: url('https://i.postimg.cc/sDGbqfBC/newtabb.png') no-repeat center center fixed;
      background-size: cover;
      font-family: sans-serif;
    }
    .page {
      min-height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    /* Top info bar */
    .topbar {
      width: 100%;
      display: flex;
      justify-content: center;
      gap: calc(12px * var(--scale));
      padding: calc(24px * var(--scale)) calc(12px * var(--scale)) 0; /* lowered with top padding */
      box-sizing: border-box;
    }
    .pill {
      background: var(--card-bg);
      color: var(--card-fg);
      border: 3px solid var(--info-border);
      box-shadow: var(--shadow);
      padding: calc(10px * var(--scale)) calc(16px * var(--scale));
      font-size: calc(1rem * var(--scale));
      border-radius: 0;
      display: inline-flex;
      align-items: center;
      gap: calc(8px * var(--scale));
      cursor: default;
    }
    /* Clock color override */
    #clock { color: #A7C080; }

    /* Search */
    .search { margin: calc(16px * var(--scale)) 0 calc(26px * var(--scale)); }
    .search input[type="text"] {
      padding: calc(14px * var(--scale)) calc(20px * var(--scale));
      border: 3px solid var(--card-border);
      background: var(--card-bg);
      color: var(--card-fg);
      font-size: calc(1.1rem * var(--scale));
      width: calc(420px * var(--scale));
      box-shadow: var(--shadow);
    }
    .search input[type="text"]:focus { outline: none; border-color: var(--card-border-hover); }

    /* Links area centered vertically within remaining space */
    .links-wrap {
      flex: 1;
      width: 100%;
      display: flex;
      align-items: flex-start; /* move links higher */
      justify-content: center;
      box-sizing: border-box;
      padding-top: calc(40px * var(--scale));
      padding-bottom: calc(24px * var(--scale));
    }
    .links { display: flex; flex-wrap: wrap; justify-content: center; gap: calc(12px * var(--scale)); max-width: 1200px; }

    a.bookmark {
      display: inline-block;
      padding: calc(16px * var(--scale)) calc(24px * var(--scale)); /* reverted to old size */
      background: var(--card-bg);
      color: var(--card-fg);
      text-decoration: none;
      border: 3px solid var(--card-border);
      border-radius: 0;
      font-size: calc(1.2rem * var(--scale));
      transition: border-color 0.18s ease, transform 0.18s ease, box-shadow 0.18s ease;
      box-shadow: var(--shadow);
    }
    a.bookmark:hover { border-color: var(--card-border-hover); transform: translateY(-4px); box-shadow: var(--shadow-hover); }
  </style>
</head>
<body>
  <div class="page">
    <!-- Top info bar -->
    <div class="topbar">
      <div class="pill" id="weather">Loading weather…</div>
      <div class="pill" id="clock">Loading time…</div>
      <div class="pill" id="sun">Loading first/last light…</div>
    </div>

    <!-- Search -->
    <form class="search" action="https://duckduckgo.com/" method="get">
      <input type="text" name="q" placeholder="Search DuckDuckGo..." />
    </form>

    <!-- Links -->
    <div class="links-wrap">
      <div class="links">
        <a class="bookmark" href="https://chatgpt.com/">ChatGPT</a>
        <a class="bookmark" href="https://github.com/dware837/newtablinux/blob/main/index.html">GitHub</a>
        <a class="bookmark" href="https://mail.google.com/mail/u/0/#inbox">Gmail</a>
        <a class="bookmark" href="https://drive.google.com/drive/my-drive">Google Drive</a>
        <a class="bookmark" href="http://localhost:8096/web/index.html#/home.html">Jellyfin</a>
        <a class="bookmark" href="https://www.espn.com/nba/team/schedule/_/name/sac">Kings</a>
        <a class="bookmark" href="https://docs.google.com/spreadsheets/d/1ebtgqfqtgkzxK8E67lhI8CMmzxZpXmX9asPHK9wptS8/edit?gid=202463003#gid=202463003">Library</a>
        <a class="bookmark" href="https://lichess.org/">Lichess</a>
        <a class="bookmark" href="https://outlook.office.com/mail/">Outlook</a>
        <a class="bookmark" href="https://www.practiceportuguese.com/">Portuguese</a>
        <a class="bookmark" href="https://drive.proton.me/u/0/cQ7L3gePuclsfx14t4-B3wboSdUtFATdAifLALnq8ocaTEUniKIzB58TCFTYHrwYQ-X4byyuYoKGUV4TNp0Z1Q==/folder/pW2-QMBHeSN1D2DE4V_I6t-rwIP0wrObHaXDB1VRGKCiHZMV4VGiyzZIDkG9gxpR6aY0pGzZEe96aWJzDKL2vA==">Proton Drive</a>
        <a class="bookmark" href="https://mail.proton.me/u/0/inbox">Proton Mail</a>
        <a class="bookmark" href="https://rateyourmusic.com/~valuska">RYM</a>
        <a class="bookmark" href="https://danielware.xyz/">Site</a>
        <a class="bookmark" href="https://neocities.org/dashboard">Site Dev</a>
        <a class="bookmark" href="https://www.youtube.com/feed/subscriptions">YouTube</a>
      </div>
    </div>
  </div>

  <script>
    // === Clock (Pacific Time) ===
    function updateClock(){
      const now = new Date();
      const time = new Intl.DateTimeFormat('en-US', { timeZone: 'America/Los_Angeles', hour: 'numeric', minute: '2-digit' }).format(now);
      document.getElementById('clock').textContent = time;
    }
    updateClock();
    setInterval(updateClock, 1000);

    // === Weather (Open-Meteo) & First/Last Light (sunrise-sunset.org) for Bakersfield, CA ===
    (function(){
      const lat = 35.3733, lon = -119.0187;

      // Weather from Open-Meteo
      const weatherUrl = 'https://api.open-meteo.com/v1/forecast?latitude=' + lat + '&longitude=' + lon + '&current_weather=true&timezone=America%2FLos_Angeles';
      fetch(weatherUrl)
        .then(r => r.json())
        .then(data => {
          const c = data.current_weather;
          const f = Math.round((c.temperature * 9/5) + 32);
          const desc = weatherCodeToText(c.weathercode);
          document.getElementById('weather').textContent = `Bakersfield: ${f}°F, ${desc}`;
        })
        .catch(() => { document.getElementById('weather').textContent = 'Weather unavailable'; });

      // First light / last light from sunrise-sunset.org (civil twilight)
      const sunUrl = `https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lon}&formatted=0`;
      fetch(sunUrl)
        .then(r => r.json())
        .then(data => {
          const res = data.results;
          const first = new Date(res.civil_twilight_begin).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', timeZone: 'America/Los_Angeles' });
          const last  = new Date(res.civil_twilight_end).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', timeZone: 'America/Los_Angeles' });
          document.getElementById('sun').textContent = `First light ${first} • Last light ${last}`;
        })
        .catch(() => { document.getElementById('sun').textContent = 'Light times unavailable'; });

      function weatherCodeToText(code){
        const map = {
          0: 'Clear sky', 1: 'Mainly clear', 2: 'Partly cloudy', 3: 'Overcast',
          45: 'Fog', 48: 'Depositing rime fog',
          51: 'Light drizzle', 53: 'Drizzle', 55: 'Heavy drizzle',
          56: 'Light freezing drizzle', 57: 'Freezing drizzle',
          61: 'Light rain', 63: 'Rain', 65: 'Heavy rain',
          66: 'Light freezing rain', 67: 'Freezing rain',
          71: 'Light snow', 73: 'Snow', 75: 'Heavy snow',
          77: 'Snow grains',
          80: 'Light rain showers', 81: 'Rain showers', 82: 'Violent rain showers',
          85: 'Light snow showers', 86: 'Snow showers',
          95: 'Thunderstorm', 96: 'Thunderstorm w/ hail', 99: 'Thunderstorm w/ heavy hail'
        };
        return map[code] || '—';
      }
    })();
  </script>
</body>
</html>

